{
  "workflow_id": "ml_model_dev",
  "name": "Machine Learning Model Development",
  "description": "Complete machine learning model development workflow including data preparation, model training, evaluation, and deployment.",
  "steps": [
    {
      "step_id": "problem_definition",
      "name": "Problem Definition",
      "agent": "ralph",
      "task": "Define the machine learning problem, identify target variables, set evaluation metrics, and establish success criteria. Document the problem statement and constraints.",
      "dependencies": [],
      "iterations": 2,
      "on_failure": "stop"
    },
    {
      "step_id": "data_collection",
      "name": "Data Collection",
      "agent": "ralph",
      "task": "Collect and gather relevant datasets. Identify data sources, set up data pipelines, and perform initial data quality checks. Ensure proper data licensing and privacy compliance.",
      "dependencies": [
        "problem_definition"
      ],
      "iterations": 3,
      "on_failure": "stop"
    },
    {
      "step_id": "data_preprocessing",
      "name": "Data Preprocessing",
      "agent": "coder",
      "task": "Implement comprehensive data preprocessing pipeline. Handle missing values, outliers, categorical encoding, feature scaling, and data normalization. Create train/validation/test splits.",
      "dependencies": [
        "data_collection"
      ],
      "iterations": 8,
      "on_failure": "retry"
    },
    {
      "step_id": "feature_engineering",
      "name": "Feature Engineering",
      "agent": "coder",
      "task": "Develop and select features for the model. Create new features through domain knowledge, perform feature selection, and engineer transformations. Analyze feature importance and correlations.",
      "dependencies": [
        "data_preprocessing"
      ],
      "iterations": 6,
      "on_failure": "continue"
    },
    {
      "step_id": "model_selection",
      "name": "Model Selection",
      "agent": "coder",
      "task": "Select and implement baseline models. Try multiple algorithms (linear models, tree-based, neural networks, etc.). Set up cross-validation and initial hyperparameter tuning.",
      "dependencies": [
        "feature_engineering"
      ],
      "iterations": 8,
      "on_failure": "continue"
    },
    {
      "step_id": "model_training",
      "name": "Model Training",
      "agent": "coder",
      "task": "Train selected models with optimized hyperparameters. Implement proper training pipelines, use cross-validation, and track training metrics. Save trained models with versioning.",
      "dependencies": [
        "model_selection"
      ],
      "iterations": 10,
      "on_failure": "retry"
    },
    {
      "step_id": "model_evaluation",
      "name": "Model Evaluation",
      "agent": "tester",
      "task": "Comprehensively evaluate model performance using defined metrics. Generate confusion matrices, ROC curves, precision-recall curves. Perform error analysis and identify failure modes.",
      "dependencies": [
        "model_training"
      ],
      "iterations": 5,
      "on_failure": "continue"
    },
    {
      "step_id": "model_optimization",
      "name": "Model Optimization",
      "agent": "coder",
      "task": "Optimize model for production. Perform hyperparameter tuning, implement model distillation or pruning if needed, optimize inference speed, and reduce model size.",
      "dependencies": [
        "model_evaluation"
      ],
      "iterations": 6,
      "on_failure": "continue"
    },
    {
      "step_id": "model_testing",
      "name": "Model Testing",
      "agent": "tester",
      "task": "Write comprehensive tests for the model pipeline. Test preprocessing, inference, edge cases, and data drift detection. Ensure reproducibility of results.",
      "dependencies": [
        "model_optimization"
      ],
      "iterations": 4,
      "on_failure": "continue"
    },
    {
      "step_id": "model_documentation",
      "name": "Model Documentation",
      "agent": "ralph",
      "task": "Create comprehensive model documentation. Include model cards, data sheets, performance benchmarks, usage examples, and API documentation. Document limitations and ethical considerations.",
      "dependencies": [
        "model_evaluation"
      ],
      "iterations": 3,
      "on_failure": "continue"
    },
    {
      "step_id": "deployment_prep",
      "name": "Deployment Preparation",
      "agent": "coder",
      "task": "Prepare model for deployment. Create prediction APIs, containerize the model service, set up monitoring and logging, and prepare CI/CD pipelines for model updates.",
      "dependencies": [
        "model_testing",
        "model_documentation"
      ],
      "iterations": 4,
      "on_failure": "stop"
    }
  ]
}